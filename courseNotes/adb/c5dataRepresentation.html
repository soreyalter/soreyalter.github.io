<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>数据的表示</title>
    <meta name="description" content="A Personal Blog Site">
    <meta name="generator" content="VitePress v1.3.1">
    <link rel="preload stylesheet" href="/assets/style.C0J6dgIs.css" as="style">
    
    <script type="module" src="/assets/app.KecRDHQk.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.BGthqKqN.js">
    <link rel="modulepreload" href="/assets/chunks/theme.DjQ74mEl.js">
    <link rel="modulepreload" href="/assets/courseNotes_adb_c5dataRepresentation.md.DLhV-OK6.lean.js">
    <link rel="icon" href="/favicon.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-0c86f07f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-96fe9ba9></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-96fe9ba9> Skip to content </a><!--]--><!----><header class="VPNav" data-v-0c86f07f data-v-3c058497><div class="VPNavBar has-sidebar top" data-v-3c058497 data-v-6f622f5b><div class="wrapper" data-v-6f622f5b><div class="container" data-v-6f622f5b><div class="title" data-v-6f622f5b><div class="VPNavBarTitle has-sidebar" data-v-6f622f5b data-v-d5518736><a class="title" href="/" data-v-d5518736><!--[--><!--]--><!--[--><img class="VPImage logo" src="/avatar.jpg" alt data-v-9fcbd645><!--]--><span data-v-d5518736>SoreyAlter&#39;s Blog</span><!--[--><!--]--></a></div></div><div class="content" data-v-6f622f5b><div class="content-body" data-v-6f622f5b><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6f622f5b><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6f622f5b data-v-ae27e9f5><span id="main-nav-aria-label" class="visually-hidden" data-v-ae27e9f5> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-ae27e9f5 data-v-08ab601c><!--[--><span data-v-08ab601c>Home</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-ae27e9f5 data-v-45292758><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-45292758><span class="text" data-v-45292758><!----><span data-v-45292758>课程笔记</span><span class="vpi-chevron-down text-icon" data-v-45292758></span></span></button><div class="menu" data-v-45292758><div class="VPMenu" data-v-45292758 data-v-1fa7f31c><div class="items" data-v-1fa7f31c><!--[--><!--[--><div class="VPMenuLink" data-v-1fa7f31c data-v-28013191><a class="VPLink link" href="/courseNotes/adb/" data-v-28013191><!--[-->高级数据库技术（金培权）<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1fa7f31c data-v-28013191><a class="VPLink link" href="/courseNotes/popl/markdown-examples" data-v-28013191><!--[-->程序设计语言原理（华保健）<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-ae27e9f5 data-v-45292758><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-45292758><span class="text" data-v-45292758><!----><span data-v-45292758>自学笔记</span><span class="vpi-chevron-down text-icon" data-v-45292758></span></span></button><div class="menu" data-v-45292758><div class="VPMenu" data-v-45292758 data-v-1fa7f31c><div class="items" data-v-1fa7f31c><!--[--><!--[--><div class="VPMenuLink" data-v-1fa7f31c data-v-28013191><a class="VPLink link" href="/selfstudyNotes/frontend/" data-v-28013191><!--[-->前端笔记<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1fa7f31c data-v-28013191><a class="VPLink link" href="/selfstudyNotes/backend/" data-v-28013191><!--[-->后端笔记<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-ae27e9f5 data-v-45292758><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-45292758><span class="text" data-v-45292758><!----><span data-v-45292758>网上冲浪海难</span><span class="vpi-chevron-down text-icon" data-v-45292758></span></span></button><div class="menu" data-v-45292758><div class="VPMenu" data-v-45292758 data-v-1fa7f31c><div class="items" data-v-1fa7f31c><!--[--><!--[--><div class="VPMenuLink" data-v-1fa7f31c data-v-28013191><a class="VPLink link" href="/solutionNotes/tel5/mo2intro" data-v-28013191><!--[-->上古卷轴5<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1fa7f31c data-v-28013191><a class="VPLink link" href="/solutionNotes/issues/markdown-examples" data-v-28013191><!--[-->杂项记录<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6f622f5b data-v-1e9a186a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-1e9a186a data-v-818a6315 data-v-f29aac1f><span class="check" data-v-f29aac1f><span class="icon" data-v-f29aac1f><!--[--><span class="vpi-sun sun" data-v-818a6315></span><span class="vpi-moon moon" data-v-818a6315></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6f622f5b data-v-7baee38c data-v-f31bcd55><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-f31bcd55 data-v-72054f67><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6f622f5b data-v-c8b311b4 data-v-45292758><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-45292758><span class="vpi-more-horizontal icon" data-v-45292758></span></button><div class="menu" data-v-45292758><div class="VPMenu" data-v-45292758 data-v-1fa7f31c><!----><!--[--><!--[--><!----><div class="group" data-v-c8b311b4><div class="item appearance" data-v-c8b311b4><p class="label" data-v-c8b311b4>Appearance</p><div class="appearance-action" data-v-c8b311b4><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-c8b311b4 data-v-818a6315 data-v-f29aac1f><span class="check" data-v-f29aac1f><span class="icon" data-v-f29aac1f><!--[--><span class="vpi-sun sun" data-v-818a6315></span><span class="vpi-moon moon" data-v-818a6315></span><!--]--></span></span></button></div></div></div><div class="group" data-v-c8b311b4><div class="item social-links" data-v-c8b311b4><div class="VPSocialLinks social-links-list" data-v-c8b311b4 data-v-f31bcd55><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-f31bcd55 data-v-72054f67><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6f622f5b data-v-fc2a1fb6><span class="container" data-v-fc2a1fb6><span class="top" data-v-fc2a1fb6></span><span class="middle" data-v-fc2a1fb6></span><span class="bottom" data-v-fc2a1fb6></span></span></button></div></div></div></div><div class="divider" data-v-6f622f5b><div class="divider-line" data-v-6f622f5b></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-0c86f07f data-v-de96b486><div class="container" data-v-de96b486><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-de96b486><span class="vpi-align-left menu-icon" data-v-de96b486></span><span class="menu-text" data-v-de96b486>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-de96b486 data-v-db8d0b92><button data-v-db8d0b92>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-0c86f07f data-v-b42e69ca><div class="curtain" data-v-b42e69ca></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b42e69ca><span class="visually-hidden" id="sidebar-aria-label" data-v-b42e69ca> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-3cbc0797><section class="VPSidebarItem level-0 collapsible has-active" data-v-3cbc0797 data-v-1eb70494><div class="item" role="button" tabindex="0" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><h2 class="text" data-v-1eb70494>高级数据库技术（Adb）</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-1eb70494><span class="vpi-chevron-right caret-icon" data-v-1eb70494></span></div></div><div class="items" data-v-1eb70494><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Readme</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c1DBsystem" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 1. 数据库系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c2relationalDatabase" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 2. 关系数据库</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c3-1schemaDesign" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 3-1. 模式设计</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c3-2DBD" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 3-2. 数据库设计</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c4dataStorage" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 4. 数据存储</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c5dataRepresentation" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 5. 数据表示</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c6bufferManagement" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 6. 缓存管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c7indexStructure" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 7. 索引结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c8queryOptimization" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 8. 查询优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c9queryExecution" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 9. 查询执行</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c10LogRecovery" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 10. 日志和恢复</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/adb/c11concurrencyControl" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap 11. 并发控制</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-3cbc0797><section class="VPSidebarItem level-0 collapsible collapsed" data-v-3cbc0797 data-v-1eb70494><div class="item" role="button" tabindex="0" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><h2 class="text" data-v-1eb70494>程序设计语言原理（POPL）</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-1eb70494><span class="vpi-chevron-right caret-icon" data-v-1eb70494></span></div></div><div class="items" data-v-1eb70494><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/popl/markdown-examples" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap1. 课程介绍（编译器结构）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1eb70494 data-v-1eb70494><div class="item" data-v-1eb70494><div class="indicator" data-v-1eb70494></div><a class="VPLink link link" href="/courseNotes/popl/api-examples" data-v-1eb70494><!--[--><p class="text" data-v-1eb70494>Chap2. Parser 词法解析</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-0c86f07f data-v-ed565c03><div class="VPDoc has-sidebar has-aside" data-v-ed565c03 data-v-57db183d><!--[--><!--]--><div class="container" data-v-57db183d><div class="aside" data-v-57db183d><div class="aside-curtain" data-v-57db183d></div><div class="aside-container" data-v-57db183d><div class="aside-content" data-v-57db183d><div class="VPDocAside" data-v-57db183d data-v-6e479e0f><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6e479e0f data-v-e8a93312><div class="content" data-v-e8a93312><div class="outline-marker" data-v-e8a93312></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-e8a93312>On this page</div><ul class="VPDocOutlineItem root" data-v-e8a93312 data-v-829f9461><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6e479e0f></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-57db183d><div class="content-container" data-v-57db183d><!--[--><!--]--><main class="main" data-v-57db183d><div style="position:relative;" class="vp-doc _courseNotes_adb_c5dataRepresentation" data-v-57db183d><div><h1 id="数据的表示" tabindex="-1">数据的表示 <a class="header-anchor" href="#数据的表示" aria-label="Permalink to &quot;数据的表示&quot;">​</a></h1><blockquote><p>1、数据项的表示</p><p>2、记录的表示</p><p><strong>3、记录在磁盘块中的组织*</strong></p><p>4、链表式堆文件和目录式堆文件</p></blockquote><h2 id="数据项的表示" tabindex="-1">数据项的表示 <a class="header-anchor" href="#数据项的表示" aria-label="Permalink to &quot;数据项的表示&quot;">​</a></h2><p>数据项表示关系数据库中元组的<strong>属性值</strong>，用<strong>字节序列</strong>来表示</p><p><strong>两种不同的数据项表示</strong></p><ul><li>定长数据项</li><li>变长数据项 <ul><li>带长度 （常用）</li><li>Null Terminated（结束符）</li></ul></li></ul><p><img src="/adb/chap5/2b5af2c092c5ad2239efb398cb011b9a.png" alt="image.png"></p><h2 id="记录的组织" tabindex="-1">记录的组织 <a class="header-anchor" href="#记录的组织" aria-label="Permalink to &quot;记录的组织&quot;">​</a></h2><h3 id="固定格式定长记录" tabindex="-1">固定格式定长记录 <a class="header-anchor" href="#固定格式定长记录" aria-label="Permalink to &quot;固定格式定长记录&quot;">​</a></h3><p>所有记录具有相同的逻辑结构（模式）</p><p>考虑如下模式</p><p><img src="/adb/chap5/ee838ec7cd275d44fd4c50259306b9dc.png" alt="image.png"></p><p><strong>不考虑寻址特点</strong></p><p>依次紧邻存放在磁盘中</p><p><img src="/adb/chap5/8936d1461d52a77c3bfe5807f226033e.png" alt="image.png"></p><p><strong>考虑寻址特点</strong></p><p>假设记录和字段的开始地址必须是4的倍数</p><p><img src="/adb/chap5/5feaccba2ce9c950b72b53f404d51235.png" alt="image.png"></p><p><strong>记录的首部</strong></p><ul><li>记录类型（模式信息）</li><li>记录长度</li><li>时间戳</li><li>其它信息</li></ul><p><img src="/adb/chap5/84386722058b8970d97fa61ada629639.png" alt="image.png"></p><h3 id="可变格式记录" tabindex="-1">可变格式记录 <a class="header-anchor" href="#可变格式记录" aria-label="Permalink to &quot;可变格式记录&quot;">​</a></h3><p>每个记录的格式不同</p><h4 id="带有模式-语义-的方式" tabindex="-1">带有模式（语义）的方式 <a class="header-anchor" href="#带有模式-语义-的方式" aria-label="Permalink to &quot;带有模式（语义）的方式&quot;">​</a></h4><ul><li>记录的格式存储在记录中</li></ul><p><img src="/adb/chap5/99d8674fee4b20572b1ffb91dfa295a7.png" alt="image.png"></p><h4 id="key-value-方式" tabindex="-1">Key-Value 方式 <a class="header-anchor" href="#key-value-方式" aria-label="Permalink to &quot;Key-Value 方式&quot;">​</a></h4><p>记录都以“ KEY + VALUE ”方式表示</p><p>KEY 与 VALUE 都以<strong>字节流</strong>（byte string）存储</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //字节流指针</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> size;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //字节流长度</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} DBT;</span></span></code></pre></div><p><strong>键值对数据库特点</strong></p><ul><li>数据类型没有限制</li><li>应用与数据库之间不需转换数据格式</li><li>不提供KEY和VALUE的内容和结构信息</li><li>应用必须知道所用的VALUE的含义（由应用来解释语义）</li></ul><p><strong>优缺点</strong></p><ul><li>灵活的记录格式，适合“松散”记录 <ul><li>尽管一个记录可能有大量字段，但某个记录通常只有 有限的几个字段</li><li>例如，病人的检验结果</li></ul></li><li>适合处理重复字段</li><li>适合记录格式演变</li><li>浪费存储空间</li></ul><h3 id="变长记录表示" tabindex="-1">变长记录表示 <a class="header-anchor" href="#变长记录表示" aria-label="Permalink to &quot;变长记录表示&quot;">​</a></h3><h4 id="首部指针法" tabindex="-1">首部指针法 <a class="header-anchor" href="#首部指针法" aria-label="Permalink to &quot;首部指针法&quot;">​</a></h4><ul><li>定长字段在前，变长字段在后</li><li>首部加入两个信息：记录长度，以及所有除第一个之外的变长字段起始处的指针</li></ul><p><img src="/adb/chap5/76293d7430aa1d4f09318f28fd78b8a7.png" alt="image.png"></p><h4 id="混合格式" tabindex="-1">混合格式 <a class="header-anchor" href="#混合格式" aria-label="Permalink to &quot;混合格式&quot;">​</a></h4><ul><li>保持记录定长，将变长部分【变长字段和重复次数不确定的字段（比如明星影片集）】放在另一个块</li><li>记录本身存储开始指针 + 长度/结束指针 <ul><li>变长字段开始处的指针和该字段的长度</li><li>指向每一个重复字段开始处的指针和重复次数或者重复结束处</li></ul></li></ul><p><img src="/adb/chap5/5fe95d849671ffffd4d2774e72518df9.png" alt="image.png"></p><h2 id="记录在块中的组织" tabindex="-1">记录在块中的组织（*） <a class="header-anchor" href="#记录在块中的组织" aria-label="Permalink to &quot;记录在块中的组织（\*）&quot;">​</a></h2><p><strong>假设和前提</strong></p><ul><li>块的大小固定</li><li>记录组织成单个文件</li></ul><h3 id="定长记录" tabindex="-1">定长记录 <a class="header-anchor" href="#定长记录" aria-label="Permalink to &quot;定长记录&quot;">​</a></h3><p>一种是块头标识了该块中记录的数量</p><p>一种是块头用位图的方式表示空闲槽和已用的槽</p><p><img src="/adb/chap5/3b97aaef9653bb64c2a71a2a18e4cf24.png" alt="image.png"></p><h3 id="变长记录" tabindex="-1">变长记录 <a class="header-anchor" href="#变长记录" aria-label="Permalink to &quot;变长记录&quot;">​</a></h3><p>块头有槽数和槽目录，第几个目录项就对应第几个记录，目录中存有有记录指针和记录长度</p><p>图中&lt;i, 3&gt;的寻址有错</p><p><img src="/adb/chap5/085f0adb7876933f0d38d63c13442867.png" alt="image.png"></p><h3 id="记录的分隔" tabindex="-1">记录的分隔 <a class="header-anchor" href="#记录的分隔" aria-label="Permalink to &quot;记录的分隔&quot;">​</a></h3><ul><li>定长记录：不需分隔</li><li>变长记录：使用特殊标记 ，或者通过块内偏移量</li></ul><p><strong>跨块和不跨块记录</strong></p><p>跨块（spanned）方式下，记录的首部需要存储以下信息</p><ul><li>一个二进制位表示当前记录是否是一个片段</li><li>若干二进制位表明是否是记录的第一个片段或最后一个片段</li><li>指向前一个片段和后一个片段的指针</li></ul><p><img src="/adb/chap5/cd9c279d87185cf5db635ff6761b41fc.png" alt="image.png"></p><h3 id="聚簇" tabindex="-1">聚簇 <a class="header-anchor" href="#聚簇" aria-label="Permalink to &quot;聚簇&quot;">​</a></h3><h4 id="多关系聚簇" tabindex="-1">多关系聚簇 <a class="header-anchor" href="#多关系聚簇" aria-label="Permalink to &quot;多关系聚簇&quot;">​</a></h4><p>经常一起访问的记录存储在同一块或连续块中，提高查询效率</p><p><img src="/adb/chap5/dc5650b9158573abbb00ccd21f05083c.png" alt="image.png"></p><h4 id="单关系聚簇" tabindex="-1">单关系聚簇 <a class="header-anchor" href="#单关系聚簇" aria-label="Permalink to &quot;单关系聚簇&quot;">​</a></h4><p>另一种聚簇 (对于RDB：单关系上的聚簇) ：将记录按某个字段顺序排列在块中</p><ul><li>加快按排序字段查询记录时的效率</li><li>利于归并联接 （will be discussed later）</li></ul><h3 id="记录地址" tabindex="-1">记录地址 <a class="header-anchor" href="#记录地址" aria-label="Permalink to &quot;记录地址&quot;">​</a></h3><p>物理地址和逻辑地址</p><p><img src="/adb/chap5/7ccb7231577111a940d81c0c6fd8770a.png" alt="image.png"></p><h2 id="记录的修改" tabindex="-1">记录的修改 <a class="header-anchor" href="#记录的修改" aria-label="Permalink to &quot;记录的修改&quot;">​</a></h2><h3 id="插入" tabindex="-1">插入 <a class="header-anchor" href="#插入" aria-label="Permalink to &quot;插入&quot;">​</a></h3><h4 id="记录无序的情况" tabindex="-1">记录无序的情况 <a class="header-anchor" href="#记录无序的情况" aria-label="Permalink to &quot;记录无序的情况&quot;">​</a></h4><ul><li>插入到任意块的空闲空间中</li><li>或申请一个新块（当所有块都已满时）</li><li>记录变长时，可使用偏移量表</li></ul><p><img src="/adb/chap5/f7b51679c2232452abb736d0777013ec.png" alt="image.png"></p><h4 id="记录有序的情况" tabindex="-1">记录有序的情况 <a class="header-anchor" href="#记录有序的情况" aria-label="Permalink to &quot;记录有序的情况&quot;">​</a></h4><ul><li>找到记录应该放置的块</li><li>如果有空间，放入并调节记录顺序即可，否则有 两种方法： <ul><li>在“邻近块”中找空间</li><li>创建溢出块</li></ul></li></ul><h3 id="删除" tabindex="-1">删除 <a class="header-anchor" href="#删除" aria-label="Permalink to &quot;删除&quot;">​</a></h3><p>使用删除标记</p><ul><li>若使用偏移表，则可以修改偏移表项指针，将其 置空</li><li>若使用逻辑－物理地址映射表，则可以将物理地 址置空</li><li>可以在记录首部预留一开始位：0－未删除，1 已删除</li></ul><p>看习题理解删除标记</p><h2 id="块在文件中的组织" tabindex="-1">块在文件中的组织 <a class="header-anchor" href="#块在文件中的组织" aria-label="Permalink to &quot;块在文件中的组织&quot;">​</a></h2><p><strong>堆文件（Heap File）</strong></p><ul><li>最基本、最简单的文件结构</li><li>记录不以任何顺序排序</li><li>记录可能存放在物理不邻接的块上</li><li>插入容易，但查找和删除代价高</li></ul><h3 id="链表式堆文件组织" tabindex="-1">链表式堆文件组织 <a class="header-anchor" href="#链表式堆文件组织" aria-label="Permalink to &quot;链表式堆文件组织&quot;">​</a></h3><p>维护一个空闲块链表和一个满块链表</p><p><img src="/adb/chap5/787115c6f9c4f9f82917bc536e700504.png" alt="image.png"></p><h3 id="目录式堆文件组织" tabindex="-1">目录式堆文件组织 <a class="header-anchor" href="#目录式堆文件组织" aria-label="Permalink to &quot;目录式堆文件组织&quot;">​</a></h3><p>用目录索引指出该文件的数据块在哪（指针）</p><p><img src="/adb/chap5/c96d198a605a23a9f975db9fb7d4a0c8.png" alt="image.png"></p></div></div></main><footer class="VPDocFooter" data-v-57db183d data-v-1d9e2393><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1d9e2393><span class="visually-hidden" id="doc-footer-aria-label" data-v-1d9e2393>Pager</span><div class="pager" data-v-1d9e2393><a class="VPLink link pager-link prev" href="/courseNotes/adb/c4dataStorage" data-v-1d9e2393><!--[--><span class="desc" data-v-1d9e2393>Previous page</span><span class="title" data-v-1d9e2393>Chap 4. 数据存储</span><!--]--></a></div><div class="pager" data-v-1d9e2393><a class="VPLink link pager-link next" href="/courseNotes/adb/c6bufferManagement" data-v-1d9e2393><!--[--><span class="desc" data-v-1d9e2393>Next page</span><span class="title" data-v-1d9e2393>Chap 6. 缓存管理</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-0c86f07f data-v-92168792><div class="container" data-v-92168792><p class="message" data-v-92168792>Released under the GNU General Public License v3.0.</p><p class="copyright" data-v-92168792>Copyright © 2024-present SoreyLong</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"coursenotes_adb_c10logrecovery.md\":\"BmlzbTFF\",\"coursenotes_adb_c11concurrencycontrol.md\":\"D-8i57OD\",\"coursenotes_adb_c1dbsystem.md\":\"B9KuH3Ms\",\"coursenotes_adb_c2relationaldatabase.md\":\"Cg6Y4FEY\",\"coursenotes_adb_c3-1schemadesign.md\":\"B_tE3STb\",\"coursenotes_adb_c3-2dbd.md\":\"l65VJaOS\",\"coursenotes_adb_c4datastorage.md\":\"BN1jGYRd\",\"coursenotes_adb_c5datarepresentation.md\":\"DLhV-OK6\",\"coursenotes_adb_c6buffermanagement.md\":\"C1z7W_yN\",\"coursenotes_adb_c7indexstructure.md\":\"D9FHjILV\",\"coursenotes_adb_c8queryoptimization.md\":\"BR1GdyAP\",\"coursenotes_adb_c9queryexecution.md\":\"CIDeT3FO\",\"coursenotes_adb_index.md\":\"DCjMQJai\",\"coursenotes_popl_api-examples.md\":\"DgIdu5El\",\"coursenotes_popl_markdown-examples.md\":\"DHWSsguB\",\"examples_api-examples.md\":\"DvoG8xiU\",\"examples_markdown-examples.md\":\"DlSOvbfG\",\"index.md\":\"CNW1EQjz\",\"selfstudynotes_backend_index.md\":\"CfWv4jYU\",\"selfstudynotes_frontend_html-css-bagu.md\":\"LpsiwBnF\",\"selfstudynotes_frontend_index.md\":\"CjGwTHi-\",\"selfstudynotes_frontend_js-bagu.md\":\"h-gz7IHP\",\"selfstudynotes_frontend_network-bagu.md\":\"djycqbuE\",\"selfstudynotes_frontend_uniappprojectnotes.md\":\"C6_Vai5J\",\"selfstudynotes_frontend_vue-bagu.md\":\"Db65ko5K\",\"solutionnotes_issues_api-examples.md\":\"B315FB8o\",\"solutionnotes_issues_markdown-examples.md\":\"CcfvF7iL\",\"solutionnotes_tel5_mo2intro.md\":\"DFOoZ0z5\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"SoreyAlter's Blog\",\"titleTemplate\":false,\"description\":\"A Personal Blog Site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/avatar.jpg\",\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"课程笔记\",\"items\":[{\"text\":\"高级数据库技术（金培权）\",\"link\":\"/courseNotes/adb/\"},{\"text\":\"程序设计语言原理（华保健）\",\"link\":\"/courseNotes/popl/markdown-examples\"}]},{\"text\":\"自学笔记\",\"items\":[{\"text\":\"前端笔记\",\"link\":\"/selfstudyNotes/frontend/\"},{\"text\":\"后端笔记\",\"link\":\"/selfstudyNotes/backend/\"}]},{\"text\":\"网上冲浪海难\",\"items\":[{\"text\":\"上古卷轴5\",\"link\":\"/solutionNotes/tel5/mo2intro\"},{\"text\":\"杂项记录\",\"link\":\"/solutionNotes/issues/markdown-examples\"}]}],\"sidebar\":{\"/courseNotes/\":[{\"text\":\"高级数据库技术（Adb）\",\"items\":[{\"text\":\"Readme\",\"link\":\"/courseNotes/adb/\"},{\"text\":\"Chap 1. 数据库系统\",\"link\":\"/courseNotes/adb/c1DBsystem\"},{\"text\":\"Chap 2. 关系数据库\",\"link\":\"/courseNotes/adb/c2relationalDatabase\"},{\"text\":\"Chap 3-1. 模式设计\",\"link\":\"/courseNotes/adb/c3-1schemaDesign\"},{\"text\":\"Chap 3-2. 数据库设计\",\"link\":\"/courseNotes/adb/c3-2DBD\"},{\"text\":\"Chap 4. 数据存储\",\"link\":\"/courseNotes/adb/c4dataStorage\"},{\"text\":\"Chap 5. 数据表示\",\"link\":\"/courseNotes/adb/c5dataRepresentation\"},{\"text\":\"Chap 6. 缓存管理\",\"link\":\"/courseNotes/adb/c6bufferManagement\"},{\"text\":\"Chap 7. 索引结构\",\"link\":\"/courseNotes/adb/c7indexStructure\"},{\"text\":\"Chap 8. 查询优化\",\"link\":\"/courseNotes/adb/c8queryOptimization\"},{\"text\":\"Chap 9. 查询执行\",\"link\":\"/courseNotes/adb/c9queryExecution\"},{\"text\":\"Chap 10. 日志和恢复\",\"link\":\"/courseNotes/adb/c10LogRecovery\"},{\"text\":\"Chap 11. 并发控制\",\"link\":\"/courseNotes/adb/c11concurrencyControl\"}],\"collapsed\":true},{\"text\":\"程序设计语言原理（POPL）\",\"items\":[{\"text\":\"Chap1. 课程介绍（编译器结构）\",\"link\":\"/courseNotes/popl/markdown-examples\"},{\"text\":\"Chap2. Parser 词法解析\",\"link\":\"/courseNotes/popl/api-examples\"}],\"collapsed\":true}],\"/selfstudyNotes/\":[{\"text\":\"前端\",\"items\":[{\"text\":\"index\",\"link\":\"/selfstudyNotes/frontend/\"},{\"text\":\"vue 八股\",\"link\":\"/selfstudyNotes/frontend/vue-bagu\"},{\"text\":\"js 八股\",\"link\":\"/selfstudyNotes/frontend/js-bagu\"},{\"text\":\"html & css 八股\",\"link\":\"/selfstudyNotes/frontend/html-css-bagu\"},{\"text\":\"计网 & 浏览器八股\",\"link\":\"/selfstudyNotes/frontend/network-bagu\"},{\"text\":\"uni-app 记录\",\"link\":\"/selfstudyNotes/frontend/uniappProjectNotes\"}],\"collapsed\":true},{\"text\":\"后端\",\"items\":[{\"text\":\"TODO\",\"link\":\"/selfstudyNotes/backend/\"}],\"collapsed\":true}],\"/solutionNotes/\":[{\"text\":\"上古卷轴5\",\"items\":[{\"text\":\"MO2 入门介绍\",\"link\":\"/solutionNotes/tel5/mo2intro\"}],\"collapsed\":true},{\"text\":\"其他翻车事件\",\"items\":[{\"text\":\"大无语事件\",\"link\":\"/solutionNotes/issues/markdown-examples\"},{\"text\":\"翻墙翻车事件\",\"link\":\"/solutionNotes/issues/api-examples\"}],\"collapsed\":true}]},\"footer\":{\"message\":\"Released under the GNU General Public License v3.0.\",\"copyright\":\"Copyright © 2024-present SoreyLong\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>